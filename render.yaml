services:
  # Directus
  - type: web
    plan: free
    name: teamhub-directus
    runtime: image
    image:
      url: docker.io/directus/directus:latest
    region: frankfurt # optional (defaults to oregon)
    envVars:
      - fromGroup: team-hub
      - key: DB_CLIENT
        value: pg
      - key: DB_HOST
        fromDatabase:
          name: tolli
          property: host
      - key: DB_PORT
        value: 5432
      - key: DB_DATABASE
        value: teamhub_prod
      - key: DB_USER
        fromDatabase:
          name: tolli
          property: user
      - key: DB_PASSWORD
        fromDatabase:
          name: tolli
          property: password
    numInstances: 1 # optional (defaults to 1)
  - type: web
    plan: free
    name: teamhub-app
    runtime: node
    repo: https://github.com/Tolli81/team-hub.git
    rootDir: nuxt-app
    buildCommand: yarn build
    startCommand: yarn start
    domains:
      - teamhub.keppni.io

    autoDeploy: false # optional
